# Cloudflare Pages configuration for Piranha Stories
# https://developers.cloudflare.com/pages/functions/wrangler-configuration/

name = "piranha-stories"

# Updated to 2025-08-15 for native MessageChannel support (required for React 19 SSR)
# https://github.com/cloudflare/workerd/pull/3336
compatibility_date = "2025-08-15"

# nodejs_compat_v2 includes MessageChannel and other Node.js APIs needed for React SSR
compatibility_flags = ["nodejs_compat_v2"]

# Pages build output directory
pages_build_output_dir = "dist"

# Note: Build command is configured in Cloudflare Pages dashboard, not here
# Set build command to: npm run build
# Set output directory to: dist

# KV Namespace binding for Astro sessions (optional)
# The @astrojs/cloudflare adapter automatically looks for a "SESSION" binding
# Uncomment and configure if you need server-side sessions
# [[kv_namespaces]]
# binding = "SESSION"
# id = "<your-kv-namespace-id>"
